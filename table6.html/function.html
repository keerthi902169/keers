<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JavaScript Function Demo</title>
</head>

<body>
  <h2>JavaScript function demo</h2>

  <button onclick="runDeclaration()">Function Declaration</button>
  <button onclick="runExpression()">Function Expression</button>
  <button onclick="runArrow()">Arrow Function</button>
  <button onclick="runAnonymous()">Anonymous Function</button>
  <button onclick="runIIFE()">IIFE Function</button>
  <button onclick="runConstructor()">Constructor Function</button>
  <button onclick="runGenerator()">Generator Function</button>
  <button onclick="runAsync()">Async Function</button>

  <div id="output">Output will appear here...</div>

  <script>
    const outputDiv = document.getElementById("output");

    function show(msg) {
      outputDiv.innerText += msg + "\n";
    }

    function clearOutput() {
      outputDiv.innerText = "";
    }

    // 1. Function Declaration
    function calculateTotal(price, tax) {
      return price + (price * tax);
    }

    function runDeclaration() {
      clearOutput();
      show("Total = " + calculateTotal(100, 0.05));
    }

    // 2. Function Expression
    const greetUser = function(name) {
      return `Welcome, ${name}`;
    };

    function runExpression() {
      clearOutput();
      show(greetUser("Keerthi"));
    }

    // 3. Arrow Function
    const tasks = ["Work", "Sleep", "Exercise", "Study"];
    const shortTasks = tasks.filter(task => task.length <= 5);

    function runArrow() {
      clearOutput();
      show("Short tasks: " + shortTasks.join(", "));
    }

    // 4. Anonymous Function
    function runAnonymous() {
      clearOutput();
      setTimeout(function() {
        show("Reminder: Take a break!");
      }, 1000);
    }

    // 5. IIFE
    function runIIFE() {
      clearOutput();
      (function() {
        const secretToken = "abc123";
        show("IIFE executed securely, token hidden!");
      })();
    }

    // 6. Constructor Function
    function Person(name, age) {
      this.name = name;
      this.age = age;
    }

    function runConstructor() {
      clearOutput();
      const person1 = new Person("Megha", 20);
      show("Constructor created Person => Name: " + person1.name + ", Age: " + person1.age);
    }

    // 7. Generator Function
    function* idGenerator() {
      let id = 1;
      while (true) {    
        yield id++;
      }
    }

    const gen = idGenerator();

    function runGenerator() {
      clearOutput();
      show("Generated id: " + gen.next().value);
    }

    // 8. Async Function
    async function getData() {
      return "Here is your async data!";
    }

    async function runAsync() {
      clearOutput();
      const result = await getData();
      show(result);
    }
  </script>
</body>
</html>
